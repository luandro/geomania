@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Fredoka:wght@400;500;600;700&display=swap')
layer(base);
@import 'leaflet/dist/leaflet.css' layer(base);

@import 'tailwindcss';

@plugin 'tailwindcss-animate';

@custom-variant dark (&:is(.dark *));

@utility container {
  margin-inline: auto;
  padding-inline: 2rem;
  @media (width >= --theme(--breakpoint-xs)) {
    max-width: none;
  }
  @media (width >= 1400px) {
    max-width: 1400px;
  }
}

@theme {
  --breakpoint-xs: 380px;

  --font-sans: Poppins, system-ui, sans-serif;

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-success: hsl(var(--success));
  --color-success-foreground: hsl(var(--success-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-quiz-card: hsl(var(--quiz-card));
  --color-quiz-correct: hsl(var(--quiz-correct));
  --color-quiz-incorrect: hsl(var(--quiz-incorrect));
  --color-quiz-flag: hsl(var(--quiz-flag-bg));

  --color-sidebar: hsl(var(--sidebar-background));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

/* Ensure minimum touch target size for accessibility */
@utility touch-target {
  min-height: 44px;
  min-width: 44px;
}

@utility quiz-gradient {
  background: linear-gradient(
    115deg,
    hsl(var(--quiz-gradient-start)) 0%,
    hsl(var(--quiz-gradient-start) / 0.92) 35%,
    hsl(var(--quiz-gradient-end)) 100%
  );
}

@utility quiz-card-shadow {
  box-shadow:
    0 10px 40px -12px hsl(var(--primary) / 0.45),
    0 4px 10px -3px hsl(var(--secondary) / 0.2);
}

@utility flag-shadow {
  box-shadow: 0 8px 24px -8px hsl(var(--foreground) / 0.15);
}

@utility answer-btn-hover {
  @apply transition-all duration-200 ease-out;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px -8px hsl(var(--primary) / 0.3);
  }
}

@utility pulse-correct {
  animation: pulse-correct 0.5s ease-out;
}

@utility pulse-incorrect {
  animation: pulse-incorrect 0.5s ease-out;
}

@utility bounce-in {
  animation: bounce-in 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@utility slide-up {
  animation: slide-up 0.4s ease-out;
}

@utility fade-in {
  animation: fade-in 0.3s ease-out;
}

@utility scale-in {
  animation: scale-in 0.3s ease-out;
}

@utility kuromi-grid {
  background-image:
    linear-gradient(45deg, rgba(0, 0, 0, 0.08) 25%, transparent 25%),
    linear-gradient(-45deg, rgba(0, 0, 0, 0.08) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, rgba(255, 20, 147, 0.1) 75%),
    linear-gradient(-45deg, transparent 75%, rgba(255, 20, 147, 0.1) 75%);
  background-size: 28px 28px;
  background-position:
    0 0,
    0 14px,
    14px -14px,
    -14px 0px;
}

@utility kuromi-spotlight {
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    inset: -40%;
    background:
      radial-gradient(
        circle at 30% 30%,
        rgba(255, 182, 193, 0.35),
        transparent 45%
      ),
      radial-gradient(
        circle at 80% 0%,
        rgba(232, 84, 148, 0.2),
        transparent 30%
      ),
      radial-gradient(
        circle at 20% 90%,
        rgba(107, 59, 160, 0.25),
        transparent 38%
      );
    filter: blur(24px);
    z-index: 0;
  }

  & > * {
    position: relative;
    z-index: 1;
  }
}

@utility kuromi-pill {
  background: linear-gradient(
    135deg,
    hsl(var(--primary) / 0.2),
    hsl(var(--secondary) / 0.2)
  );
  border: 1px solid hsl(var(--primary) / 0.4);
  box-shadow: 0 10px 30px -10px hsl(var(--primary) / 0.4);
}

@utility arcade-button {
  position: relative;
  overflow: hidden;
  background: linear-gradient(
    145deg,
    #0d0d0d 0%,
    #1a1a1a 35%,
    #3d1b5c 60%,
    #ff1493 100%
  );
  border: 2px solid rgba(255, 20, 147, 0.6);
  box-shadow:
    0 14px 30px -12px rgba(255, 20, 147, 0.35),
    0 8px 16px -10px rgba(0, 0, 0, 0.55),
    inset 0 0 0 1px rgba(255, 255, 255, 0.05);
  transition:
    transform 200ms ease,
    box-shadow 200ms ease,
    border-color 200ms ease;

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(
        circle at 30% 30%,
        rgba(255, 182, 193, 0.15),
        transparent 40%
      ),
      radial-gradient(
        circle at 75% 20%,
        rgba(232, 84, 148, 0.12),
        transparent 35%
      ),
      radial-gradient(
        circle at 20% 85%,
        rgba(107, 59, 160, 0.14),
        transparent 45%
      );
    mix-blend-mode: screen;
    opacity: 0.9;
  }

  &:hover {
    transform: translateY(-3px) scale(1.02);
    border-color: rgba(255, 182, 193, 0.9);
    box-shadow:
      0 18px 40px -12px rgba(255, 20, 147, 0.45),
      0 10px 20px -10px rgba(0, 0, 0, 0.6),
      inset 0 0 0 1px rgba(255, 255, 255, 0.08);
  }

  &:active {
    transform: translateY(0) scale(0.99);
    box-shadow:
      0 10px 22px -12px rgba(255, 20, 147, 0.4),
      0 6px 12px -10px rgba(0, 0, 0, 0.65);
  }
}
@utility arcade-round {
  position: relative;
  border-radius: 9999px;
  background: radial-gradient(
    circle at 30% 30%,
    #ff69b4 0%,
    #ff1493 40%,
    #8b4789 75%,
    #0d0d0d 100%
  );
  color: #fff;
  border: none;
  box-shadow:
    inset 0 10px 0 rgba(255, 255, 255, 0.16),
    inset 0 -12px 0 rgba(0, 0, 0, 0.25),
    inset 0 0 0 8px rgba(255, 20, 147, 0.6),
    inset 0 0 0 14px rgba(0, 0, 0, 0.28),
    inset 0 0 0 22px rgba(255, 20, 147, 0.42),
    inset 0 0 0 30px rgba(0, 0, 0, 0.32),
    inset 0 45px 38px rgba(0, 0, 0, 0.18),
    0 16px 0 rgba(0, 0, 0, 0.28),
    0 0 25px rgba(255, 20, 147, 0.35);
  transition:
    transform 160ms ease,
    box-shadow 160ms ease,
    filter 160ms ease;
  isolation: isolate;

  &::after {
    content: '';
    position: absolute;
    bottom: 18%;
    left: 16%;
    width: 68%;
    height: 68%;
    border: 10px solid rgba(0, 0, 0, 0.25);
    border-radius: 9999px;
    border-top-width: 0;
    transition:
      bottom 160ms ease,
      border-width 160ms ease;
  }

  &::before {
    content: '';
    position: absolute;
    bottom: 35%;
    left: 32%;
    width: 36%;
    height: 26%;
    background: linear-gradient(
      to top,
      rgba(255, 255, 255, 0.45),
      rgba(255, 255, 255, 0)
    );
    border-radius: 50% 50% 60% 60%;
    opacity: 0.9;
    transition: opacity 160ms ease;
  }

  &:hover {
    transform: translateY(-3px);
    box-shadow:
      inset 0 12px 0 rgba(255, 255, 255, 0.18),
      inset 0 -8px 0 rgba(0, 0, 0, 0.2),
      inset 0 0 0 8px rgba(255, 182, 193, 0.85),
      inset 0 0 0 14px rgba(0, 0, 0, 0.22),
      inset 0 0 0 22px rgba(255, 105, 180, 0.55),
      inset 0 0 0 30px rgba(0, 0, 0, 0.26),
      inset 0 45px 38px rgba(0, 0, 0, 0.16),
      0 20px 0 rgba(0, 0, 0, 0.3),
      0 0 32px rgba(255, 105, 180, 0.45);
    filter: saturate(1.05);
  }

  &:active {
    transform: translateY(1px) scale(0.99);
    box-shadow:
      inset 0 6px 0 rgba(255, 255, 255, 0.1),
      inset 0 -10px 0 rgba(0, 0, 0, 0.24),
      inset 0 0 0 6px rgba(255, 20, 147, 0.6),
      inset 0 0 0 12px rgba(0, 0, 0, 0.28),
      inset 0 0 0 18px rgba(255, 20, 147, 0.5),
      inset 0 0 0 28px rgba(0, 0, 0, 0.32),
      inset 0 48px 36px rgba(0, 0, 0, 0.22),
      0 10px 0 rgba(0, 0, 0, 0.28);
  }

  &:active::after {
    bottom: 26%;
    border-width: 0;
  }

  &:hover .stroke-text {
    transform: translate(0.5px, -0.5px);
  }
}
@utility arcade-round-dark {
  background: #6b3ba0;
  box-shadow:
    inset 0 10px 0 rgba(255, 255, 255, 0.1),
    inset 0 -12px 0 rgba(0, 0, 0, 0.28),
    inset 0 0 0 8px rgba(107, 59, 160, 0.7),
    inset 0 0 0 14px rgba(0, 0, 0, 0.28),
    inset 0 0 0 22px rgba(107, 59, 160, 0.55),
    inset 0 0 0 30px rgba(0, 0, 0, 0.34),
    inset 0 45px 38px rgba(0, 0, 0, 0.24),
    0 16px 0 rgba(0, 0, 0, 0.36);
}
@utility arcade-round-lg {
  width: 240px;
  height: 240px;
}
@utility arcade-round-md {
  width: 180px;
  height: 180px;
}
@utility stroke-text {
  /* Text stroke helper for button labels */
  color: #fff;
  text-shadow:
    -1.5px -1.5px 0 rgba(0, 0, 0, 0.55),
    1.5px -1.5px 0 rgba(0, 0, 0, 0.55),
    -1.5px 1.5px 0 rgba(0, 0, 0, 0.55),
    1.5px 1.5px 0 rgba(0, 0, 0, 0.55);
  display: inline-block;
  transition: transform 120ms ease;

  .arcade-round:hover & {
    transform: translate(0.5px, -0.5px);
  }
}
@utility level-icon-pulse {
  animation: level-icon-pulse 5s ease-in-out infinite;
  will-change: transform, filter;
}
@utility wave-letter {
  animation: letter-wave 1.2s ease-in-out infinite;
  will-change: transform;
}
@utility leaflet-container {
  background: hsl(var(--muted));
  font-family: inherit;
}
@utility leaflet-control-zoom {
  border: none;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.2);

  & a {
    background: hsl(var(--card));
    color: hsl(var(--foreground));
    border: 1px solid hsl(var(--border));
    border-radius: 12px;
    font-weight: 700;
  }

  & a:hover {
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
  }

  .map-immersive & {
    pointer-events: auto;
    display: grid;
    gap: 10px;
    padding: 12px;
    margin: 0;
    border-radius: 28px;
    background:
      radial-gradient(circle at 20% 20%, hsl(var(--card)) 0%, transparent 55%),
      linear-gradient(
        160deg,
        hsl(var(--secondary) / 0.25),
        hsl(var(--accent) / 0.2)
      );
    border: 1px solid hsl(var(--primary) / 0.35);
    backdrop-filter: blur(10px);
    box-shadow:
      0 18px 32px rgba(0, 0, 0, 0.28),
      inset 0 0 0 1px rgba(255, 255, 255, 0.4);
  }

  .map-immersive & a {
    width: 48px;
    height: 48px;
    line-height: 46px;
    font-size: 22px;
    border-radius: 18px;
    background: radial-gradient(
      circle at 30% 30%,
      hsl(var(--card)) 0%,
      hsl(var(--muted)) 75%
    );
    border: 1px solid hsl(var(--primary) / 0.35);
    color: hsl(var(--secondary));
    box-shadow:
      0 12px 18px rgba(0, 0, 0, 0.22),
      inset 0 0 0 1px rgba(255, 255, 255, 0.35);
    transition:
      transform 150ms ease,
      box-shadow 150ms ease,
      background 150ms ease,
      color 150ms ease;
  }

  .map-immersive & a:hover {
    transform: translateY(-2px);
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    box-shadow:
      0 16px 24px rgba(0, 0, 0, 0.28),
      inset 0 0 0 1px rgba(255, 255, 255, 0.35);
  }

  .map-immersive & a:active {
    transform: translateY(1px);
  }

  @media (min-width: 640px) {
    .map-immersive & a {
      width: 56px;
      height: 56px;
      line-height: 54px;
      font-size: 24px;
      border-radius: 20px;
    }
  }
}
@utility map-immersive {
  & .leaflet-control-container {
    pointer-events: none;
  }

  & .map-side-controls {
    top: 50%;
    transform: translateY(calc(-50% - 104px));
    align-items: stretch;
  }

  & .leaflet-top.leaflet-right {
    top: 50%;
    transform: translateY(-50%);
    right: 12px;
  }

  & .leaflet-control-zoom {
    pointer-events: auto;
    display: grid;
    gap: 10px;
    padding: 12px;
    margin: 0;
    border-radius: 28px;
    background:
      radial-gradient(circle at 20% 20%, hsl(var(--card)) 0%, transparent 55%),
      linear-gradient(
        160deg,
        hsl(var(--secondary) / 0.25),
        hsl(var(--accent) / 0.2)
      );
    border: 1px solid hsl(var(--primary) / 0.35);
    backdrop-filter: blur(10px);
    box-shadow:
      0 18px 32px rgba(0, 0, 0, 0.28),
      inset 0 0 0 1px rgba(255, 255, 255, 0.4);
  }

  & .leaflet-control-zoom a {
    width: 48px;
    height: 48px;
    line-height: 46px;
    font-size: 22px;
    border-radius: 18px;
    background: radial-gradient(
      circle at 30% 30%,
      hsl(var(--card)) 0%,
      hsl(var(--muted)) 75%
    );
    border: 1px solid hsl(var(--primary) / 0.35);
    color: hsl(var(--secondary));
    box-shadow:
      0 12px 18px rgba(0, 0, 0, 0.22),
      inset 0 0 0 1px rgba(255, 255, 255, 0.35);
    transition:
      transform 150ms ease,
      box-shadow 150ms ease,
      background 150ms ease,
      color 150ms ease;
  }

  & .leaflet-control-zoom a:hover {
    transform: translateY(-2px);
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    box-shadow:
      0 16px 24px rgba(0, 0, 0, 0.28),
      inset 0 0 0 1px rgba(255, 255, 255, 0.35);
  }

  & .leaflet-control-zoom a:active {
    transform: translateY(1px);
  }

  @media (min-width: 640px) {
    & .map-side-controls {
      transform: translateY(calc(-50% - 124px));
    }

    & .leaflet-top.leaflet-right {
      right: 18px;
    }

    & .leaflet-control-zoom a {
      width: 56px;
      height: 56px;
      line-height: 54px;
      font-size: 24px;
      border-radius: 20px;
    }
  }

  @media (min-width: 1024px) {
    & .map-side-controls {
      transform: translateY(calc(-50% - 140px));
    }
  }
}
@utility leaflet-control-container {
  .map-immersive & {
    pointer-events: none;
  }
}
@utility map-side-controls {
  .map-immersive & {
    top: 50%;
    transform: translateY(calc(-50% - 104px));
    align-items: stretch;
  }

  @media (min-width: 640px) {
    .map-immersive & {
      transform: translateY(calc(-50% - 124px));
    }
  }

  @media (min-width: 1024px) {
    .map-immersive & {
      transform: translateY(calc(-50% - 140px));
    }
  }
}
@utility leaflet-top {
  .map-immersive &.leaflet-right {
    top: 50%;
    transform: translateY(-50%);
    right: 12px;
  }

  @media (min-width: 640px) {
    .map-immersive &.leaflet-right {
      right: 18px;
    }
  }
}
@utility leaflet-right {
  .map-immersive &.leaflet-top {
    top: 50%;
    transform: translateY(-50%);
    right: 12px;
  }

  @media (min-width: 640px) {
    .map-immersive &.leaflet-top {
      right: 18px;
    }
  }
}

@layer base {
  :root {
    --background: 32 100% 97%; /* cream */
    --foreground: 0 0% 12%; /* charcoal */

    --card: 36 100% 98%;
    --card-foreground: 0 0% 12%;

    --popover: 36 100% 98%;
    --popover-foreground: 0 0% 12%;

    --primary: 328 100% 54%; /* hot pink */
    --primary-foreground: 0 0% 100%;

    --secondary: 269 46% 43%; /* deep purple */
    --secondary-foreground: 0 0% 100%;

    --muted: 294 29% 87%; /* lavender wash */
    --muted-foreground: 271 55% 23%;

    --accent: 334 76% 62%; /* magenta accent */
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --success: 142 76% 36%;
    --success-foreground: 0 0% 100%;

    --border: 0 0% 83%;
    --input: 0 0% 83%;
    --ring: 328 100% 54%;

    --radius: 1rem;

    /* Custom quiz colors */
    --quiz-gradient-start: 0 0% 10%;
    --quiz-gradient-end: 328 100% 54%;
    --quiz-card: 36 100% 98%;
    --quiz-correct: 142 76% 36%;
    --quiz-incorrect: 328 100% 54%;
    --quiz-flag-bg: 294 29% 87%;

    --sidebar-background: 36 100% 98%;
    --sidebar-foreground: 0 0% 12%;
    --sidebar-primary: 0 0% 10%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 294 29% 87%;
    --sidebar-accent-foreground: 0 0% 12%;
    --sidebar-border: 0 0% 83%;
    --sidebar-ring: 328 100% 54%;
  }

  .dark {
    --background: 0 0% 5%;
    --foreground: 0 0% 98%;

    --card: 0 0% 12%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 12%;
    --popover-foreground: 0 0% 98%;

    --primary: 328 100% 54%;
    --primary-foreground: 0 0% 98%;

    --secondary: 269 46% 43%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 16%;
    --muted-foreground: 0 0% 83%;

    --accent: 334 76% 62%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 63% 45%;
    --destructive-foreground: 0 0% 98%;

    --success: 142 76% 36%;
    --success-foreground: 0 0% 100%;

    --border: 0 0% 16%;
    --input: 0 0% 16%;
    --ring: 328 100% 54%;

    --quiz-gradient-start: 0 0% 5%;
    --quiz-gradient-end: 334 76% 62%;
    --quiz-card: 0 0% 12%;
    --quiz-correct: 142 76% 36%;
    --quiz-incorrect: 334 76% 62%;
    --quiz-flag-bg: 0 0% 16%;

    --sidebar-background: 0 0% 10%;
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: 0 0% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 0 0% 16%;
    --sidebar-accent-foreground: 0 0% 98%;
    --sidebar-border: 0 0% 16%;
    --sidebar-ring: 328 100% 54%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    /* Prevent horizontal scroll on mobile */
    overflow-x: hidden;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-family: 'Poppins', 'Fredoka', sans-serif;
    /* Ensure proper touch targets and prevent zoom on input focus */
    -webkit-text-size-adjust: 100%;
    overflow-x: hidden;
    background-image: radial-gradient(circle at 20% 20%, rgba(255, 20, 147, 0.08), transparent 22%),
      radial-gradient(circle at 80% 0%, rgba(107, 59, 160, 0.08), transparent 20%),
      linear-gradient(135deg, rgba(0, 0, 0, 0.03) 0%, rgba(0, 0, 0, 0.01) 35%, rgba(255, 20, 147, 0.05) 100%);
  }
}

@layer utilities {
  /* Background utility for flag display */
  .bg-quiz-flag {
    background-color: hsl(var(--quiz-flag-bg));
  }
}

@layer utilities {
  @keyframes pulse-correct {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.02);
    }
    100% {
      transform: scale(1);
    }
  }

  @keyframes pulse-incorrect {
    0%,
    100% {
      transform: translateX(0);
    }
    20%,
    60% {
      transform: translateX(-5px);
    }
    40%,
    80% {
      transform: translateX(5px);
    }
  }

  @keyframes bounce-in {
    0% {
      transform: scale(0.3);
      opacity: 0;
    }
    50% {
      transform: scale(1.05);
    }
    70% {
      transform: scale(0.9);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes slide-up {
    0% {
      transform: translateY(20px);
      opacity: 0;
    }
    100% {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes fade-in {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  @keyframes scale-in {
    0% {
      transform: scale(0.9);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes letter-wave {
    0%,
    100% {
      transform: translateY(0) scale(1);
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4));
    }
    50% {
      transform: translateY(-6px) scale(1.08);
      filter: drop-shadow(0 0 8px rgba(255, 105, 180, 0.5))
        drop-shadow(0 0 12px rgba(255, 20, 147, 0.3));
    }
  }

  @keyframes level-icon-pulse {
    0%,
    12% {
      transform: translateY(0) scale(1) rotate(0deg);
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.3));
    }
    4% {
      transform: translateY(-4px) scale(1.08) rotate(-5deg);
      filter: drop-shadow(0 6px 12px rgba(255, 105, 180, 0.45)) saturate(1.1);
    }
    7% {
      transform: translateY(-2px) scale(1.05) rotate(4deg);
      filter: drop-shadow(0 5px 10px rgba(255, 105, 180, 0.4)) saturate(1.05);
    }
    100% {
      transform: translateY(0) scale(1) rotate(0deg);
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.3));
    }
  }

  /* Arcade circular buttons (Kuromi style) */
}

@keyframes shrink {
  0% { width: 100%; }
  100% { width: 0%; }
}
